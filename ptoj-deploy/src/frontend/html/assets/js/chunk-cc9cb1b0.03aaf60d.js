(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cc9cb1b0"],{"07d5":function(t,e,n){"use strict";n.r(e);var i=n("5530"),a=n("3228"),r=n("9a36"),s=n("5880"),o=n("7aa9");s={name:"TrainingList",data:function(){return{pageSize:10,total:0,trainingList:[],keyword:"",loading:!1,excludeAdmin:!0,currentPage:1,currentId:1,downloadDialogVisible:!1,TRAINING_TYPE:{}}},mounted:function(){this.getTrainingList(this.currentPage),this.TRAINING_TYPE=Object.assign({},r.o)},watch:{$route:function(){"true"==this.$route.query.refresh&&this.getTrainingList(1)}},computed:Object(i.a)({},Object(s.mapGetters)(["isSuperAdmin","userInfo"])),methods:{currentChange:function(t){this.currentPage=t,this.getTrainingList(t)},getTrainingList:function(t){var e=this;this.loading=!0,a.a.admin_getTrainingList(t,this.pageSize,this.keyword).then((function(t){e.loading=!1,e.total=t.data.data.total,e.trainingList=t.data.data.records}),(function(t){e.loading=!1}))},goEdit:function(t){this.$router.push({name:"admin-edit-training",params:{trainingId:t}})},goTrainingProblemList:function(t){this.$router.push({name:"admin-training-problem-list",params:{trainingId:t}})},deleteTraining:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Training_Tips"),"Tips",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){a.a.admin_deleteTraining(t).then((function(t){o.a.success(e.$i18n.t("m.Delete_successfully")),e.currentChange(1)}))}))},changeTrainingStatus:function(t,e,n){var i=this;a.a.admin_changeTrainingStatus(t,e,n).then((function(t){o.a.success(i.$i18n.t("m.Update_Successfully"))}))},filterByKeyword:function(){this.currentChange(1)},goCreateTraining:function(){this.$router.push({name:"admin-create-training"})}}},n("8ebe"),n=n("2877"),s=Object(n.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Training_List")))]),n("div",{staticClass:"filter-row"},[n("span",[n("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),n("span",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.goCreateTraining}},[t._v(t._s(t.$t("m.Create"))+" ")])],1)])]),n("vxe-table",{ref:"xTable",attrs:{loading:t.loading,data:t.trainingList,"auto-resize":"",stripe:"",align:"center"}},[n("vxe-table-column",{attrs:{field:"id",width:"80",title:"ID"}}),n("vxe-table-column",{attrs:{field:"rank",width:"80",title:t.$t("m.Order_Number")}}),n("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),n("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("el-tag",{attrs:{type:t.TRAINING_TYPE[e.auth].color,effect:"dark"}},[t._v(" "+t._s(e.auth)+" ")])]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-switch",{attrs:{disabled:!t.isSuperAdmin&&t.userInfo.username!=i.author},on:{change:function(e){return t.changeTrainingStatus(i.id,i.status,i.author)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"row.status"}})]}}])}),n("vxe-table-column",{attrs:{"min-width":"210",title:t.$t("m.Info")},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("p",[t._v("Created Time: "+t._s(t._f("localtime")(e.gmtCreate)))]),n("p",[t._v("Update Time: "+t._s(t._f("localtime")(e.gmtModified)))]),n("p",[t._v("Creator: "+t._s(e.author))])]}}])}),n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Option")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.isSuperAdmin||t.userInfo.username==i.author?[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(i.id)}}})],1),n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Training_Problem_List"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goTrainingProblemList(i.id)}}})],1)],1)]:t._e(),t.isSuperAdmin?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteTraining(i.id)}}})],1):t._e()]}}])})],1),n("div",{staticClass:"panel-options"},[n("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}})],1)],1)],1)}),[],!1,null,"35b8b816",null);e.default=s.exports},"52f0":function(t,e,n){},"8ebe":function(t,e,n){"use strict";n("52f0")}}]);