(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1576cc9a"],{"19be":function(e,t,i){},a15b:function(e,t,i){"use strict";var l=i("23e7"),o=i("44ad"),a=i("fc6a"),s=(i=i("a640"),[].join);o=o!=Object,i=i("join",",");l({target:"Array",proto:!0,forced:o||!i},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},b156:function(e,t,i){"use strict";i.r(t),i("a15b"),i("fb6a");var l=i("b85c"),o=i("3228"),a=i("90b9"),s=i("7aa9"),n={name:"import_and_export",data:function(){return{fileList1:[],fileList2:[],fileList3:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[],selected_problems:[],loading:{HOJ:!1,qdoj:!1,fps:!1}}},mounted:function(){this.getProblems()},methods:{handleSelectionChange:function(e){e=e.records,this.selected_problems=e},handlechangeAll:function(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},handleSizeChange:function(e){this.limit=e,this.getProblems()},getProblems:function(){var e=this,t={keyword:this.keyword,currentPage:0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,limit:this.limit,oj:"Mine"};this.loadingProblems=!0,o.a.admin_getProblemList(t).then((function(t){e.problems=t.data.data.records,e.total=t.data.data.total,e.loadingProblems=!1}))},exportProblems:function(){var e=[];if(this.selected_problems.length<=0)s.a.error(this.$i18n.t("m.Export_Problem_NULL_Tips"));else{var t,i=Object(l.a)(this.selected_problems);try{for(i.s();!(t=i.n()).done;){var o=t.value;e.push("pid="+o.id)}}catch(e){i.e(e)}finally{i.f()}var n="/api/file/export-problem?"+e.join("&");a.a.downloadFile(n)}},submitUpload:function(e){this.loading[e]=!0,this.$refs[e].submit()},onFile1Change:function(e,t){this.fileList1=t.slice(-1)},onFile2Change:function(e,t){this.fileList2=t.slice(-1)},onFile3Change:function(e,t){this.fileList3=t.slice(-1)},uploadSucceeded:function(e,t,i){this.loading.HOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,200!=e.status?(s.a.error(e.msg),this.$notify.error({title:this.$i18n.t("m.Error"),message:e.msg,duration:8e3})):(s.a.success(this.$i18n.t("m.Upload_Problem_Succeeded")),this.getProblems())},uploadFailed:function(){this.loading.HOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,s.a.error(this.$i18n.t("m.Upload_Problem_Failed"))},filterByKeyword:function(){this.getProblems()}}};i("be75"),i=i("2877"),n=Object(i.a)(n,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Export_Problem")))]),t("div",{staticClass:"filter-row"},[t("span",[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-down"},on:{click:e.exportProblems}},[e._v(e._s(e.$t("m.Export"))+" ")])],1),t("span",[t("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)])]),t("vxe-table",{ref:"xTable",attrs:{data:e.problems,stripe:"","auto-resize":"",loading:e.loadingProblems,"checkbox-config":{labelField:"",highlight:!0,range:!0}},on:{"checkbox-change":e.handleSelectionChange,"checkbox-all":e.handlechangeAll}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),t("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"id"}}),t("vxe-table-column",{attrs:{"min-width":"150",title:e.$t("m.Title"),field:"title"}}),t("vxe-table-column",{attrs:{"min-width":"150",field:"author",title:e.$t("m.Author")}}),t("vxe-table-column",{attrs:{field:"gmtCreate",title:e.$t("m.Created_Time")},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(e._f("localtime")(t.gmtCreate))+" ")]}}])})],1),t("div",{staticClass:"panel-options"},[t("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next, sizes","page-size":e.limit,"page-sizes":[10,50,100,500],total:e.total},on:{"current-change":e.getProblems,"size-change":e.handleSizeChange}})],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Problem")))])]),t("el-upload",{ref:"HOJ",attrs:{action:"/api/file/import-problem",name:"file","file-list":e.fileList1,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile1Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[t("el-button",{attrs:{slot:"trigger",size:"small",loading:e.loading.HOJ,type:"primary",icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.HOJ,disabled:!e.fileList1.length,icon:"el-icon-upload"},on:{click:function(t){return e.submitUpload("HOJ")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_QDOJ_Problem")))])]),t("el-upload",{ref:"QDOJ",attrs:{action:"/api/file/import-qdoj-problem",name:"file","file-list":e.fileList2,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile2Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.QDOJ,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.QDOJ,icon:"el-icon-upload",disabled:!e.fileList2.length},on:{click:function(t){return e.submitUpload("QDOJ")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_FPS_Problem")))])]),t("el-upload",{ref:"FPS",attrs:{action:"/api/file/import-fps-problem",name:"file","file-list":e.fileList3,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile3Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.FPS,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.FPS,icon:"el-icon-upload",disabled:!e.fileList3.length},on:{click:function(t){return e.submitUpload("FPS")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1)],1)}),[],!1,null,"77683562",null);t.default=n.exports},be75:function(e,t,i){"use strict";i("19be")}}]);