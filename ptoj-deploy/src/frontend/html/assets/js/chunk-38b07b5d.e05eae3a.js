(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38b07b5d"],{"25bd":function(t,e,i){},"4e8e":function(t,e,i){"use strict";i("25bd")},"880c":function(t,e,i){"use strict";i.r(e),i("4d63"),i("ac1f"),i("25f0"),i("5319");var s=i("3228"),n=i("7aa9"),o={name:"discussion",data:function(){return{pageSize:10,discussionTotal:0,discussionList:[],selectedDiscussions:[],keyword:"",discussionLoadingTable:!1,discussionCurrentPage:1,discussionReportList:[],discussionReportTotal:0,discussionReportCurrentPage:1,discussionReportLoadingTable:!1}},mounted:function(){this.getDiscussionList(1),this.getDiscussionReportList()},methods:{discussionCurrentChange:function(t){this.discussionCurrentPage=t,this.getDiscussionList(t)},discussionReportCurrentChange:function(t){this.discussionReportCurrentPage=t,this.getDiscussionReportList()},getDiscussionList:function(t){var e=this;this.discussionLoadingTable=!0,t={currentPage:t,keyword:this.keyword,admin:!0},s.a.getDiscussionList(this.pageSize,t).then((function(t){e.discussionLoadingTable=!1,e.discussionTotal=t.data.data.total,e.discussionList=t.data.data.records}),(function(t){e.discussionLoadingTable=!1}))},getDiscussionReportList:function(){var t=this;this.discussionReportLoadingTable=!0,s.a.admin_getDiscussionReport(this.discussionReportCurrentPage,this.pageSize).then((function(e){t.discussionReportLoadingTable=!1,t.discussionReportList=e.data.data.records,t.discussionReportTotal=e.data.data.total}),(function(e){t.discussionReportLoadingTable=!1}))},filterByKeyword:function(){this.discussionCurrentChange(1),this.keyword=""},handleSelectionChange:function(t){var e=t.records;this.selectedDiscussions=[];for(var i=0;i<e.length;i++)this.selectedDiscussions.push(e[i].id)},handlechangeAll:function(){var t=this.$refs.xTable.getCheckboxRecords();this.selectedDiscussions=[];for(var e=0;e<t.length;e++)this.selectedDiscussions.push(t[e].id)},changeDiscussionStatus:function(t){var e=this;t={id:t.id,status:t.status};s.a.admin_updateDiscussion(t).then((function(t){n.a.success(e.$i18n.t("m.Update_Successfully"))}))},handleTopSwitch:function(t){var e=this;t={id:t.id,topPriority:t.topPriority};s.a.admin_updateDiscussion(t).then((function(t){n.a.success(e.$i18n.t("m.Update_Successfully"))}))},handleCheckedSwitch:function(t){var e=this;t={id:t.id,status:t.status};s.a.admin_updateDiscussionReport(t).then((function(t){n.a.success(e.$i18n.t("m.Update_Successfully"))}))},toDiscussion:function(t,e){null!=e?window.open("/group/"+e+"/discussion-detail/"+t):window.open("/discussion-detail/"+t)},deleteDiscussion:function(t){var e=this;0<(t=t||this.selectedDiscussions).length?this.$confirm(this.$i18n.t("m.Delete_Discussion_Tips"),"Tips",{type:"warning"}).then((function(){s.a.admin_deleteDiscussion(t).then((function(t){n.a.success(e.$i18n.t("m.Delete_successfully")),e.selectedDiscussions=[],e.getDiscussionList(e.currentPage)})).catch((function(){e.selectedDiscussions=[],e.getDiscussionList(e.currentPage)}))}),(function(){})):n.a.warning(this.$i18n.t("m.The_number_of_discussions_selected_cannot_be_empty"))},openReportDialog:function(t){for(var e,i=RegExp("#(.*?)# ","g"),s="<strong>"+this.$i18n.t("m.Tags")+"</strong>：";e=i.exec(t);)s+=e[1]+" ";s+="<br><br><strong>"+this.$i18n.t("m.Content")+"</strong>："+t.replace(/#(.*?)# /g,""),this.$alert(s,this.$i18n.t("m.Report_Content"),{confirmButtonText:this.$i18n.t("m.OK"),dangerouslyUseHTMLString:!0})}}};i("4e8e"),i=i("2877"),o=Object(i.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Discussion_Admin")))]),i("div",{staticClass:"filter-row"},[i("span",[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete-solid",size:"small"},on:{click:function(e){return t.deleteDiscussion(null)}}},[t._v(t._s(t.$t("m.Delete"))+" ")])],1),i("span",[i("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),i("vxe-table",{ref:"xTable",attrs:{stripe:"","auto-resize":"",data:t.discussionList,align:"center",loading:t.discussionLoadingTable,"checkbox-config":{highlight:!0,range:!0}},on:{"checkbox-change":t.handleSelectionChange,"checkbox-all":t.handlechangeAll}},[i("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),i("vxe-table-column",{attrs:{field:"id",title:"ID",width:"60"}}),i("vxe-table-column",{attrs:{field:"title",title:t.$t("m.Title"),"show-overflow":"","min-width":"150"}}),i("vxe-table-column",{attrs:{field:"author",title:t.$t("m.Author"),"min-width":"150","show-overflow":""}}),i("vxe-table-column",{attrs:{field:"likeNum",title:t.$t("m.Likes"),"min-width":"96"}}),i("vxe-table-column",{attrs:{field:"viewNum",title:t.$t("m.Views"),"min-width":"96"}}),i("vxe-table-column",{attrs:{field:"gmtCreate",title:t.$t("m.Created_Time"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),i("vxe-table-column",{attrs:{field:"status",title:t.$t("m.Status"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-select",{attrs:{size:"small"},on:{change:function(e){return t.changeDiscussionStatus(s)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"row.status"}},[i("el-option",{key:0,attrs:{label:t.$t("m.Normal"),value:0}}),i("el-option",{key:1,attrs:{label:t.$t("m.Disable"),value:1}})],1)]}}])}),i("vxe-table-column",{attrs:{"min-width":"100",field:"topPriority",title:t.$t("m.Top")},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":!0,"inactive-value":!1},on:{change:function(e){return t.handleTopSwitch(s)}},model:{value:s.topPriority,callback:function(e){t.$set(s,"topPriority",e)},expression:"row.topPriority"}})]}}])}),i("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteDiscussion([s.id])}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Discussion"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(s.id,s.gid)}}})],1)]}}])})],1),i("div",{staticClass:"panel-options"},[i("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.discussionTotal},on:{"current-change":t.discussionCurrentChange}})],1)],1),i("el-card",{staticStyle:{"margin-top":"20px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Discussion_Report")))])]),i("vxe-table",{ref:"table",attrs:{loading:t.discussionReportLoadingTable,align:"center",data:t.discussionReportList,"auto-resize":"",stripe:""}},[i("vxe-table-column",{attrs:{"min-width":"60",field:"id",title:"ID"}}),i("vxe-table-column",{attrs:{"min-width":"100",field:"did",title:t.$t("m.Discussion_ID")}}),i("vxe-table-column",{attrs:{field:"discussionTitle",title:t.$t("m.Title"),"show-overflow":"","min-width":"150"}}),i("vxe-table-column",{attrs:{field:"discussionAuthor",title:t.$t("m.Author"),"min-width":"150","show-overflow":""}}),i("vxe-table-column",{attrs:{"min-width":"150",field:"reporter","show-overflow":"",title:t.$t("m.Reporter")}}),i("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:t.$t("m.Report_Time")},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),i("vxe-table-column",{attrs:{"min-width":"100",field:"status",title:t.$t("m.Checked")},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":!0,"inactive-value":!1},on:{change:function(e){return t.handleCheckedSwitch(s)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"row.status"}})]}}])}),i("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.View_Report_content"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-document",size:"mini",type:"success"},nativeOn:{click:function(e){return t.openReportDialog(s.content)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Discussion"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(s.did,s.gid)}}})],1)]}}])})],1),i("div",{staticClass:"panel-options"},[i("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.discussionReportTotal},on:{"current-change":t.discussionReportCurrentChange}})],1)],1)],1)}),[],!1,null,"05905c02",null);e.default=o.exports}}]);