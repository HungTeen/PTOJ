(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-74c5e3b8"],{2155:function(s,e,a){"use strict";a.r(e),a("b680");var t=a("3228"),i=a("7aa9"),r=(a("e05f"),{data:function(){var s=this,e=[{required:!0,trigger:"blur",message:this.$i18n.t("m.The_current_password_cannot_be_empty")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")}];return{loading:{btnPassword:!1,btnEmail:!1,btnSendEmail:!1},disabled:{btnPassword:!1,btnEmail:!1},verify:{passwordSuccess:!1,passwordMsg:"",emailSuccess:!1,emailMsg:""},visible:{passwordAlert:{type:"success",show:!1,title:"",description:""},emailAlert:{type:"success",show:!1,title:"",description:""},passwordSlideBlock:!1,emailSlideBlock:!1},formPassword:{oldPassword:"",newPassword:"",againPassword:""},formEmail:{password:"",oldEmail:"",newEmail:""},rulePassword:{oldPassword:e,newPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.The_new_password_cannot_be_empty")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")},{validator:function(e,a,t){""!==s.formPassword.oldPassword&&(s.formPassword.oldPassword===s.formPassword.newPassword?t(new Error(s.$i18n.t("m.The_new_password_does_not_change"))):s.$refs.formPassword.validateField("again_password")),t()},trigger:"blur"}],againPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Again_Check_Required")},{validator:function(e,a,t){a!==s.formPassword.newPassword&&t(new Error(s.$i18n.t("m.Password_does_not_match"))),t()},trigger:"blur"}]},ruleEmail:{password:e,newEmail:[{required:!0,message:this.$i18n.t("m.Email_Check_Required"),trigger:"blur"},{type:"email",trigger:"change",message:this.$i18n.t("m.Email_Check_Format")},{validator:function(e,a,t){""!==s.formEmail.oldEmail&&s.formEmail.oldEmail===s.formEmail.newEmail&&t(new Error(s.$i18n.t("m.The_new_email_does_not_change"))),t()},trigger:"blur"}],code:[{required:!0,message:this.$i18n.t("m.Code_Check_Required"),trigger:"blur"}]}}},mounted:function(){this.formEmail.oldEmail=this.$store.getters.userInfo.email||""},methods:{changePassword:function(s){var e=this;this.verify.passwordSuccess=!0,s=(s/1e3).toFixed(1),this.verify.passwordMsg="Total time "+s+"s",setTimeout((function(){e.visible.passwordSlideBlock=!1,e.verify.passwordSuccess=!1,e.$refs.passwordSlideBlock.reset()}),1e3),this.$refs.formPassword.validate((function(s){s&&(e.loading.btnPassword=!0,delete(s=Object.assign({},e.formPassword)).againPassword,t.a.changePassword(s).then((function(s){e.loading.btnPassword=!1,200==s.data.data.code?(i.a.success(e.$i18n.t("m.Update_Successfully")),e.visible.passwordAlert={show:!0,title:e.$i18n.t("m.Update_Successfully"),type:"success",description:s.data.data.msg},setTimeout((function(){e.visible.passwordAlert=!1,e.$router.push({name:"Logout"})}),5e3)):(i.a.error(s.data.data.msg),e.visible.passwordAlert={show:!0,title:e.$i18n.t("m.Update_Failed"),type:"warning",description:s.data.data.msg},403==s.data.data.code&&(e.visible.passwordAlert.type="error",e.disabled.btnPassword=!0))}),(function(s){e.loading.btnPassword=!1})))}))},getChangeEmailCode:function(){var s=this;this.formEmail.newEmail||i.a.error(this.$i18n.t("m.The_new_email_cannot_be_empty")),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.formEmail.newEmail)?(this.formEmail.oldEmail===this.formEmail.newEmail&&i.a.error(this.$i18n.t("m.The_new_email_does_not_change")),this.loading.btnSendEmail=!0,t.a.getChangeEmailCode(this.formEmail.newEmail).then((function(e){i.a.success(s.$i18n.t("m.Change_Send_Email_Msg")),s.$notify.success({title:s.$i18n.t("m.Success"),message:s.$i18n.t("m.Change_Send_Email_Msg"),duration:5e3,offset:50}),s.loading.btnSendEmail=!1}),(function(e){s.loading.btnSendEmail=!1}))):mMessage.error(this.$i18n.t("m.Email_Check_Format"))},changeEmail:function(s){var e=this;this.verify.emailSuccess=!0,s=(s/1e3).toFixed(1),this.verify.emailMsg="Total time "+s+"s",setTimeout((function(){e.visible.emailSlideBlock=!1,e.verify.emailSuccess=!1,e.$refs.emailSlideBlock.reset()}),1e3),this.$refs.formEmail.validate((function(s){s&&(e.loading.btnEmail=!0,s=Object.assign({},e.formEmail),t.a.changeEmail(s).then((function(s){e.loading.btnEmail=!1,200==s.data.data.code?(i.a.success(e.$i18n.t("m.Update_Successfully")),e.visible.emailAlert={show:!0,title:e.$i18n.t("m.Update_Successfully"),type:"success",description:s.data.data.msg},e.$store.dispatch("setUserInfo",s.data.data.userInfo),e.$refs.formEmail.resetFields(),e.formEmail.oldEmail=s.data.data.userInfo.email):(i.a.error(s.data.data.msg),e.visible.emailAlert={show:!0,title:e.$i18n.t("m.Update_Failed"),type:"warning",description:s.data.data.msg},403==s.data.data.code&&(e.visible.emailAlert.type="error",e.disabled.btnEmail=!0))}),(function(s){e.loading.btnEmail=!1})))}))},onAgain:function(s){this.$refs.passwordSlideBlock.reset(),i.a.warning(this.$i18n.t("m.Guess_robot"))}}});a("4f9d"),a=a("2877"),r=Object(a.a)(r,(function(){var s=this,e=s.$createElement;e=s._self._c||e;return e("div",{staticClass:"setting-main"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:10,lg:10}},[e("div",{staticClass:"left"},[e("p",{staticClass:"section-title"},[s._v(s._s(s.$t("m.Change_Password")))]),e("el-form",{ref:"formPassword",staticClass:"setting-content",attrs:{model:s.formPassword,rules:s.rulePassword}},[e("el-form-item",{attrs:{label:s.$t("m.Old_Password"),prop:"oldPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:s.formPassword.oldPassword,callback:function(e){s.$set(s.formPassword,"oldPassword",e)},expression:"formPassword.oldPassword"}})],1),e("el-form-item",{attrs:{label:s.$t("m.New_Password"),prop:"newPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:s.formPassword.newPassword,callback:function(e){s.$set(s.formPassword,"newPassword",e)},expression:"formPassword.newPassword"}})],1),e("el-form-item",{attrs:{label:s.$t("m.Confirm_New_Password"),prop:"againPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:s.formPassword.againPassword,callback:function(e){s.$set(s.formPassword,"againPassword",e)},expression:"formPassword.againPassword"}})],1)],1),e("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:s.visible.passwordSlideBlock,callback:function(e){s.$set(s.visible,"passwordSlideBlock",e)},expression:"visible.passwordSlideBlock"}},[e("el-button",{attrs:{slot:"reference",type:"primary",loading:s.loading.btnPassword,disabled:s.disabled.btnPassword},slot:"reference"},[s._v(s._s(s.$t("m.Update_Password")))]),e("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!s.verify.passwordSuccess,expression:"!verify.passwordSuccess"}],ref:"passwordSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":s.$t("m.Slide_Verify")},on:{success:s.changePassword,again:function(e){return s.onAgain("password")}}}),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:s.verify.passwordSuccess,expression:"verify.passwordSuccess"}],attrs:{title:s.$t("m.Slide_Verify_Success"),type:"success",description:s.verify.passwordMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:s.visible.passwordAlert.show,expression:"visible.passwordAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:s.visible.passwordAlert.title,type:s.visible.passwordAlert.type,description:s.visible.passwordAlert.description,closable:!1,effect:"dark","show-icon":""}})],1)],1)],1)}),[],!1,null,"0888e034",null);e.default=r.exports},"4f9d":function(s,e,a){"use strict";a("548d")},"548d":function(s,e,a){}}]);