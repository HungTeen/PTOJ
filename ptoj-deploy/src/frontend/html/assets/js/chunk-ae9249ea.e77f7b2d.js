(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ae9249ea"],{4448:function(t,e,n){"use strict";n("de4c")},"7b98":function(t,e,n){"use strict";n.r(e),n("99af");var i=n("5530"),o=n("3228"),s=n("90b9"),a=n("9a36"),l=n("5880"),r=n("7aa9");l={name:"ContestList",data:function(){return{pageSize:10,total:0,contestList:[],keyword:"",loading:!1,excludeAdmin:!0,splitType:"user",currentPage:1,currentId:1,downloadDialogVisible:!1,CONTEST_TYPE_REVERSE:{}}},mounted:function(){this.CONTEST_TYPE_REVERSE=Object.assign({},a.d),this.CONTEST_STATUS_REVERSE=Object.assign({},a.b),this.getContestList(this.currentPage)},watch:{$route:function(){"true"==this.$route.query.refresh&&this.getContestList(1)}},computed:Object(i.a)({},Object(l.mapGetters)(["isSuperAdmin","userInfo"])),methods:{currentChange:function(t){this.currentPage=t,this.getContestList(t)},getContestList:function(t){var e=this;this.loading=!0,o.a.admin_getContestList(t,this.pageSize,this.keyword).then((function(t){e.loading=!1,e.total=t.data.data.total,e.contestList=t.data.data.records}),(function(t){e.loading=!1}))},openDownloadOptions:function(t){this.downloadDialogVisible=!0,this.currentId=t},downloadSubmissions:function(){var t="/api/file/download-contest-ac-submission?cid=".concat(this.currentId,"&excludeAdmin=").concat(this.excludeAdmin,"&splitType=").concat(this.splitType);s.a.downloadFile(t),this.downloadDialogVisible=!1},goEdit:function(t){this.$router.push({name:"admin-edit-contest",params:{contestId:t}})},goContestAnnouncement:function(t){this.$router.push({name:"admin-contest-announcement",params:{contestId:t}})},goContestProblemList:function(t){this.$router.push({name:"admin-contest-problem-list",params:{contestId:t}})},deleteContest:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Contest_Tips"),"Tips",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){o.a.admin_deleteContest(t).then((function(t){r.a.success(e.$i18n.t("m.Delete_successfully")),e.currentChange(1)}))}))},changeContestVisible:function(t,e,n){var i=this;o.a.admin_changeContestVisible(t,e,n).then((function(t){r.a.success(i.$i18n.t("m.Update_Successfully"))}))},filterByKeyword:function(){this.currentChange(1)}}},n("4448"),n=n("2877"),l=Object(n.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Contest_List")))]),n("div",{staticClass:"filter-row"},[n("span",[n("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),n("vxe-table",{ref:"xTable",attrs:{loading:t.loading,data:t.contestList,"auto-resize":"",stripe:"",align:"center"}},[n("vxe-table-column",{attrs:{field:"id",width:"80",title:"ID"}}),n("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),n("vxe-table-column",{attrs:{title:t.$t("m.Type"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t._f("parseContestType")(e.type)))])]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("el-tooltip",{attrs:{content:t.$t("m."+t.CONTEST_TYPE_REVERSE[e.auth].tips),placement:"top",effect:"light"}},[n("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[e.auth].color,effect:"plain"}},[t._v(" "+t._s(t.CONTEST_TYPE_REVERSE[e.auth].name)+" ")])],1)]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("el-tag",{attrs:{effect:"dark",color:t.CONTEST_STATUS_REVERSE[e.status].color,size:"medium"}},[t._v(" "+t._s(t.CONTEST_STATUS_REVERSE[e.status].name)+" ")])]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-switch",{attrs:{disabled:!t.isSuperAdmin&&t.userInfo.uid!=i.uid},on:{change:function(e){return t.changeContestVisible(i.id,i.visible,i.uid)}},model:{value:i.visible,callback:function(e){t.$set(i,"visible",e)},expression:"row.visible"}})]}}])}),n("vxe-table-column",{attrs:{"min-width":"210",title:t.$t("m.Info")},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("p",[t._v("Start Time: "+t._s(t._f("localtime")(e.startTime)))]),n("p",[t._v("End Time: "+t._s(t._f("localtime")(e.endTime)))]),n("p",[t._v("Created Time: "+t._s(t._f("localtime")(e.gmtCreate)))]),n("p",[t._v("Creator: "+t._s(e.author))])]}}])}),n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Option")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.isSuperAdmin||t.userInfo.uid==i.uid?[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(i.id)}}})],1),n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Contest_Problem_List"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goContestProblemList(i.id)}}})],1)],1),n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Contest_Announcement_List"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-info",size:"mini",type:"info"},nativeOn:{click:function(e){return t.goContestAnnouncement(i.id)}}})],1),n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Download_Contest_AC_Submission"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.openDownloadOptions(i.id)}}})],1)],1)]:t._e(),t.isSuperAdmin?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteContest(i.id)}}})],1):t._e()]}}])})],1),n("div",{staticClass:"panel-options"},[n("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1),n("el-dialog",{attrs:{title:t.$t("m.Download_Contest_AC_Submission"),width:"320px",visible:t.downloadDialogVisible},on:{"update:visible":function(e){t.downloadDialogVisible=e}}},[n("el-switch",{attrs:{"active-text":t.$t("m.Exclude_admin_submissions")},model:{value:t.excludeAdmin,callback:function(e){t.excludeAdmin=e},expression:"excludeAdmin"}}),n("el-radio-group",{staticStyle:{"margin-top":"10px"},model:{value:t.splitType,callback:function(e){t.splitType=e},expression:"splitType"}},[n("el-radio",{attrs:{label:"user"}},[t._v(t._s(t.$t("m.SplitType_User")))]),n("el-radio",{attrs:{label:"problem"}},[t._v(t._s(t.$t("m.SplitType_Problem")))])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.downloadSubmissions}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)}),[],!1,null,"a5959342",null);e.default=l.exports},de4c:function(t,e,n){}}]);