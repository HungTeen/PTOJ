(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-21732d96"],{"6c2d":function(t,i,n){},"89ba":function(t,i,n){"use strict";n("6c2d")},ecc7:function(t,i,n){"use strict";n.r(i),n("a4d3"),n("e01a"),n("b0c0"),n("d3b7");var a=n("5530"),e=n("3228"),r=n("5880"),s=n("7aa9");a={name:"CreateTraining",components:{Editor:function(){return Promise.resolve().then(n.bind(null,"a956"))}},data:function(){return{title:"Create Training",training:{rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},trainingCategoryId:null,trainingCategoryList:[]}},mounted:function(){this.init()},watch:{$route:function(){"admin-edit-training"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Training"),this.getTraining()):(this.title=this.$i18n.t("m.Create_Training"),this.training={rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"})}},computed:Object(a.a)({},Object(r.mapGetters)(["userInfo"])),methods:{init:function(){var t=this;e.a.getTrainingCategoryList().then((function(i){i=i.data.data,i&&i.length?(t.trainingCategoryList=i,"admin-edit-training"===t.$route.name?(t.title=t.$i18n.t("m.Edit_Training"),t.getTraining()):t.title=t.$i18n.t("m.Create_Training")):t.$alert(t.$i18n.t("m.Redirect_To_Category"),t.$i18n.t("m.Redirect"),{confirmButtonText:t.$i18n.t("m.OK"),showClose:!1,callback:function(i){t.$router.push({path:"/admin/training/category"})}})}))},getTraining:function(){var t=this;e.a.admin_getTraining(this.$route.params.trainingId).then((function(i){i=i.data.data,t.training=i.training||{},t.trainingCategoryId=i.trainingCategory.id||null})).catch((function(){}))},saveTraining:function(){var t,i,n=this;this.training.rank||0==this.training.rank?this.training.title?this.training.description?this.trainingCategoryId?"Public"==this.training.auth||this.training.privatePwd?(t="admin-edit-training"===this.$route.name?"admin_editTraining":"admin_createTraining",i=Object.assign({},this.training),"admin_createTraining"==t&&(i.author=this.userInfo.username),i={training:i,trainingCategory:{id:this.trainingCategoryId}},e.a[t](i).then((function(t){s.a.success("success"),n.$router.push({name:"admin-training-list",query:{refresh:"true"}})})).catch((function(){}))):s.a.error(this.$i18n.t("m.Training_Password")+" "+this.$i18n.t("m.is_required")):s.a.error(this.$i18n.t("m.Training_Category")+" "+this.$i18n.t("m.is_required")):s.a.error(this.$i18n.t("m.Training_Description")+" "+this.$i18n.t("m.is_required")):s.a.error(this.$i18n.t("m.Training_Title")+" "+this.$i18n.t("m.is_required")):s.a.error(this.$i18n.t("m.Training_rank")+" "+this.$i18n.t("m.is_required"))}}},n("89ba"),r=n("2877"),a=Object(r.a)(a,(function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"view"},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[t._v(" "+t._s(t.title)+" ")])]),n("el-form",{attrs:{"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Training_rank"),required:""}},[n("el-input-number",{attrs:{min:0,max:2147483647,label:t.$t("m.Training_rank")},on:{change:t.handleChange},model:{value:t.training.rank,callback:function(i){t.$set(t.training,"rank",i)},expression:"training.rank"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Training_Title"),required:""}},[n("el-input",{attrs:{placeholder:t.$t("m.Training_Title")},model:{value:t.training.title,callback:function(i){t.$set(t.training,"title",i)},expression:"training.title"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Training_Description"),required:""}},[n("Editor",{attrs:{value:t.training.description},on:{"update:value":function(i){return t.$set(t.training,"description",i)}}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Category"),required:""}},[n("el-select",{model:{value:t.trainingCategoryId,callback:function(i){t.trainingCategoryId=i},expression:"trainingCategoryId"}},t._l(t.trainingCategoryList,(function(t,i){return n("el-option",{key:i,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Training_Auth"),required:""}},[n("el-select",{model:{value:t.training.auth,callback:function(i){t.$set(t.training,"auth",i)},expression:"training.auth"}},[n("el-option",{attrs:{label:t.$t("m.Public_Training"),value:"Public"}}),n("el-option",{attrs:{label:t.$t("m.Private_Training"),value:"Private"}})],1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Public"!=t.training.auth,expression:"training.auth != 'Public'"}],attrs:{label:t.$t("m.Training_Password"),required:"Public"!=t.training.auth}},[n("el-input",{attrs:{placeholder:t.$t("m.Training_Password")},model:{value:t.training.privatePwd,callback:function(i){t.$set(t.training,"privatePwd",i)},expression:"training.privatePwd"}})],1)],1)],1)],1),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.saveTraining(i)}}},[t._v(t._s(t.$t("m.Save")))])],1)],1)}),[],!1,null,"da6440e8",null);i.default=a.exports}}]);